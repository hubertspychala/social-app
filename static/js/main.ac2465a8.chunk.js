(this["webpackJsonpsocial-app"]=this["webpackJsonpsocial-app"]||[]).push([[0],{28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),o=a(22),c=a.n(o),r=(a(28),a(3)),i=(a(29),a(30),a.p+"static/media/heart-svgrepo-com.2a49e9d1.svg"),l=a(23),p=a.n(l),j=a(4),d=a.n(j),u=(a(50),a(0)),h=function(e){var t=Object(s.useState)(""),a=Object(r.a)(t,2),n=a[0],o=a[1];return Object(u.jsxs)("form",{className:"add-post-wrapper",onSubmit:function(t){t.preventDefault();var a={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+(e.user?e.user.jwt_token:"")}};console.log(n),d.a.post("https://akademia108.pl/api/social-app/post/add",{content:n},a).then((function(t){console.log("RESPONSE RECEIVED: ",t),e.getNewestPosts()})).catch((function(e){console.log("AXIOS ERROR: ",e)}))},children:[Object(u.jsx)("textarea",{name:"postArea",id:"postArea",required:!0,value:n,onChange:function(e){return o(e.target.value)}}),Object(u.jsx)("button",{type:"submit",children:"Add post"})]})},m=(a(52),function(e){var t=Object(s.useState)([]),a=Object(r.a)(t,2),n=a[0],o=a[1];function c(){var t={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+(e.user?e.user.jwt_token:"")}};console.log(t),d.a.post("https://akademia108.pl/api/social-app/follows/recommendations",{},t).then((function(e){console.log("RESPONSE RECEIVED: ",e),o(e.data),console.log(e.data)})).catch((function(e){console.log("AXIOS ERROR: ",e)}))}Object(s.useEffect)((function(){c()}),[]);var i=n.map((function(t){return Object(u.jsxs)("div",{className:"user-box",children:[Object(u.jsx)("img",{className:"avatar",src:t.avatar_url,alt:""}),Object(u.jsx)("h5",{className:"user-name",children:t.username}),Object(u.jsx)("button",{className:"follow",onClick:function(){return function(t){var a={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+(e.user?e.user.jwt_token:"")}};console.log(a),d.a.post("https://akademia108.pl/api/social-app/follows/follow",{leader_id:t},a).then((function(e){console.log("RESPONSE RECEIVED: ",e),c(),console.log(e.data)})).catch((function(e){console.log("AXIOS ERROR: ",e)}))}(t.id)},children:"Follow"})]},t.id)}));return Object(u.jsxs)("div",{className:"main-div",children:[Object(u.jsx)("h4",{children:"People You may know"}),Object(u.jsx)("div",{className:"wrapper",children:i})]})}),b=function(e){var t=Object(s.useState)([]),a=Object(r.a)(t,2),n=a[0],o=a[1],c=Object(s.useState)(""),l=Object(r.a)(c,2),j=l[0],b=l[1],O=Object(s.useState)(""),g=Object(r.a)(O,2),x=(g[0],g[1]);Object(s.useEffect)((function(){!function(){console.log(e.user);var t={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+(e.user?e.user.jwt_token:"")}};d.a.post("https://akademia108.pl/api/social-app/post/latest",{},t).then((function(e){console.log("RESPONSE RECEIVED: ",e),o(e.data),console.log(e.data),b(e.data[e.data.length-1].created_at),x(e.data[0].created_at)})).catch((function(e){console.log("AXIOS ERROR: ",e)}))}()}),[]);var f=n.map((function(e){return Object(u.jsxs)("div",{className:"post-container",children:[Object(u.jsxs)("div",{className:"post-header",children:[Object(u.jsx)("div",{className:"avatar",children:Object(u.jsx)("img",{src:e.user.avatar_url,alt:""})}),Object(u.jsxs)("div",{className:"name-wrapper",children:[Object(u.jsx)("div",{className:"nickname",children:Object(u.jsx)("p",{children:e.user.username})}),Object(u.jsx)("div",{className:"post-date",children:Object(u.jsx)("p",{children:p()(e.created_at).fromNow()})})]})]}),Object(u.jsx)("div",{className:"post-content",children:Object(u.jsx)("p",{children:e.content})}),Object(u.jsxs)("div",{className:"post-likes",children:[Object(u.jsx)("img",{className:"heart",height:18,src:i,alt:"heart"}),Object(u.jsx)("p",{className:"likes-number",children:e.likes.length})]})]},e.id)}));return Object(u.jsxs)("div",{children:[e.user&&Object(u.jsx)(m,{user:e.user})," ",e.user&&Object(u.jsx)(h,{user:e.user,getNewestPosts:function(){var t={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+(e.user?e.user.jwt_token:"")}};d.a.post("https://akademia108.pl/api/social-app/post/newer-then",{date:j},t).then((function(e){console.log("RESPONSE RECEIVED: ",e),o(e.data.concat(n)),console.log(e.data),x(e.data[0].created_at)})).catch((function(e){console.log("AXIOS ERROR: ",e)}))}}),Object(u.jsx)("div",{className:"posts-list",children:f}),Object(u.jsx)("button",{onClick:function(){var t={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+(e.user?e.user.jwt_token:"")}};d.a.post("https://akademia108.pl/api/social-app/post/older-then",{date:j},t).then((function(e){console.log("RESPONSE RECEIVED: ",e),o(n.concat(e.data)),console.log(e.data),b(e.data[e.data.length-1].created_at)})).catch((function(e){console.log("AXIOS ERROR: ",e)}))},children:"Pobierz posty"})]})},O=a(8),g=a(9),x=(a(53),a(2)),f=function(e){var t=Object(s.useState)({username:"",password:""}),a=Object(r.a)(t,2),n=a[0],o=a[1],c=function(e){o(Object(g.a)(Object(g.a)({},n),{},Object(O.a)({},e.target.name,e.target.value)))};return Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault();console.log(n.username),console.log(n.password),d.a.post("https://akademia108.pl/api/social-app/user/login",{username:n.username,password:n.password,ttl:3600},{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){t.data.error?alert("Nieprawid\u0142owe has\u0142o lub login"):(console.log("RESPONSE RECEIVED: ",t),localStorage.setItem("user",JSON.stringify(t.data)),e.setUser(t.data),console.log(t.data))})).catch((function(e){console.log("AXIOS ERROR: ",e)}))},children:[e.user&&Object(u.jsx)(x.a,{replace:!0,to:"/"}),Object(u.jsx)("h1",{children:"Login"}),Object(u.jsx)("input",{type:"text",name:"username",placeholder:"enter an email",value:n.email,onChange:c}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"password",name:"password",placeholder:"enter a password",value:n.password,onChange:c}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"submit",children:"Login"}),Object(u.jsx)("br",{}),Object(u.jsxs)("span",{className:"form-input-login",children:["Dont have an account yet? Sign-up ",Object(u.jsx)("a",{href:"/signUp",children:"here"})]})]})};a(54);function v(e){var t={};return e.username.trim()||(t.username="Username required"),e.email.trim()||(t.email="Email required"),e.password.trim()||(t.password="Password is required"),e.password.length<6?t.password="Password needs to be 6 characters":e.password.search(/[!,#,@,$,%]/)<0&&e.password.search(/[0-9]/)<0&&e.password.length<8?t.password="Password needs to be 6 characters, must contain one number and one of charts: ! # @ $ %":e.password.search(/[0-9]/)<0?t.password="Password must contain one number":e.password.search(/[!,#,@,$,%]/)<0&&(t.password="Password must contain one of charts: ! # @ $ %"),e.password2?e.password2!==e.password&&(t.password2="Passwords do not match"):t.password2="Password is required",t}var w=function(e){var t=Object(s.useState)({username:"",email:"",password:"",password2:""}),a=Object(r.a)(t,2),n=a[0],o=a[1],c=Object(s.useState)({}),i=Object(r.a)(c,2),l=i[0],p=i[1],j=Object(s.useState)(!1),u=Object(r.a)(j,2),h=u[0],m=u[1];return{handleChange:function(e){var t=e.target,a=t.name,s=t.value;o(Object(g.a)(Object(g.a)({},n),{},Object(O.a)({},a,s)))},values:n,handleSubmit:function(t){if(t.preventDefault(),p(e(n)),console.log(e(n)),0===Object.keys(e(n)).length){var a={username:n.username,email:n.email,password:n.password};d.a.post("http://akademia108.pl/api/social-app/user/signup",JSON.stringify(a),{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){m(!0),console.log(e.data)})).catch((function(e){console.error(e)}))}},errors:l,isSubmitted:h}},N=function(){var e=w(v),t=e.handleChange,a=e.values,s=e.handleSubmit,n=e.errors,o=e.isSubmitted;return Object(u.jsx)("div",{className:"form-contnet",children:Object(u.jsxs)("form",{className:"form",onSubmit:s,children:[Object(u.jsx)("h1",{children:"Sign-Up"}),Object(u.jsxs)("div",{className:"form-inputs",children:[Object(u.jsx)("input",{id:"username",placeholder:"Enter your username",className:"form-input",type:"text",name:"username",minLength:"4",value:a.username,onChange:t}),n.username&&Object(u.jsx)("p",{children:n.username})]}),Object(u.jsxs)("div",{className:"form-inputs",children:[Object(u.jsx)("input",{id:"email",placeholder:"Enter your email",className:"form-input",type:"email",name:"email",value:a.email,onChange:t}),n.email&&Object(u.jsx)("p",{children:n.email})]}),Object(u.jsxs)("div",{className:"form-inputs",children:[Object(u.jsx)("input",{id:"password",placeholder:"Enter your password",className:"form-input",type:"password",name:"password",value:a.password,onChange:t}),n.password&&Object(u.jsx)("p",{children:n.password})]}),Object(u.jsxs)("div",{className:"form-inputs",children:[Object(u.jsx)("input",{id:"password2",placeholder:"Confirm your password",className:"form-input",type:"password",name:"password2",value:a.password2,onChange:t}),n.password2&&Object(u.jsx)("p",{children:n.password2})]}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{children:"Submit"}),Object(u.jsx)("br",{}),o?Object(u.jsx)("div",{className:"succes-message",children:"Succes! Thank for your registeration!"}):null,Object(u.jsx)("br",{}),Object(u.jsxs)("span",{className:"form-input-login",children:["Already have an account? Login ",Object(u.jsx)("a",{href:"/login",children:"here"})]})]})})},S=a(7);function E(e){var t=Object(x.h)();return Object(u.jsxs)("div",{children:[Object(u.jsxs)("nav",{className:"main-nav",children:[Object(u.jsx)(S.b,{className:"main-nav-link",to:"/",children:"Social-app"}),!e.user&&Object(u.jsx)(S.b,{className:"main-nav-link",to:"/login",children:"Login"}),!e.user&&Object(u.jsx)(S.b,{className:"main-nav-link",to:"/signUp",children:"Sign-up"}),e.user&&Object(u.jsx)(S.b,{className:"main-nav-link",to:"/",onClick:function(){var a={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+e.user.jwt_token}};d.a.post("https://akademia108.pl/api/social-app/user/logout",{},a).then((function(a){console.log("RESPONSE RECEIVED: ",a),localStorage.removeItem("user"),console.log(a.data),t("/login",{replace:!0}),e.setUser(null)})).catch((function(e){console.log("AXIOS ERROR: ",e)}))},children:"Logout"})]}),Object(u.jsx)("div",{className:"outlet",children:Object(u.jsx)(x.b,{})})]})}function R(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Nothing to see here!"}),Object(u.jsx)("p",{children:Object(u.jsx)(S.b,{to:"/login",children:"Go to the home page"})})]})}var k=function(e){var t=Object(s.useState)(JSON.parse(localStorage.getItem("user"))?JSON.parse(localStorage.getItem("user")):null),a=Object(r.a)(t,2),n=a[0],o=a[1];return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("header",{className:"App-header"}),Object(u.jsx)(S.a,{children:Object(u.jsx)(x.e,{children:Object(u.jsxs)(x.c,{path:"/",element:Object(u.jsx)(E,{user:n,setUser:o}),children:[Object(u.jsx)(x.c,{path:"/",element:Object(u.jsx)(b,{user:n})}),Object(u.jsx)(x.c,{path:"login",element:Object(u.jsx)(f,{user:n,setUser:o})}),Object(u.jsx)(x.c,{path:"signUp",element:Object(u.jsx)(N,{})}),Object(u.jsx)(x.c,{path:"*",element:Object(u.jsx)(R,{})})]})})})]})};c.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(k,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.ac2465a8.chunk.js.map